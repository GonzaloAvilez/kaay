{% load static %}
{% load el_pagination_tags %}
{% load thumbnail %}

{% paginate products %}
<div  id="b" class="justified-gallery" style="background-color: black;" > 
  {% for product  in products %}
      {% if product.category == category %} 
        <a href="{{ product.get_absolute_url }}"class="portfolio-box  image-frame">
          <img  src="{% if product.image %}{{ product.image.url }}{%else %}{% static 'image/noimage.png' %}{% endif %}">
            <div class="portfolio-box-caption">
              <div class="portfolio-box-caption-content">
                <div class="project-category text-faded">
                <h3>{{ product.name }}</h3>
                </div>
                <div class="project-name">
                <h3>By: {{ product.author.get_short_name }}</h3>
                </div>
                <div>{{ product.category }}</div>
              </div>
          </div>    
        </a>
      {% else %}      
      {% if not category %}   
          <a href="{{ product.get_absolute_url }}"class="portfolio-box  image-frame">      
             <img title="profile picture" src="{% if product.image %}{% thumbnail product.image 400x400 crop %}{%else %}{% static 'image/noimage.png' %}{% endif %}">  
              <div class="portfolio-box-caption">
                <div class="portfolio-box-caption-content">
                  <div class="project-category text-faded">
                  <h3>{{ product.name }}</h3>
                  </div>
                  <div class="project-name">
                  </div>
                  <div>By: {{ product.author.get_short_name }}</div>
                </div>
             </div>    
          </a> 
      {% endif %} 
      {% endif %}
  {% endfor %}   
</div>  
        
{% show_more %}

{% block scripts %}
<script  src="{% static 'site/js/jquery.js' %}" ></script>     
<script src="{% static 'site/js/el-pagination.js' %}"></script>    
<script src = "{%static 'site/js/jquery.justifiedGallery.js' %}"></script>
<script>$.endlessPaginate({paginateOnScroll: true});</script>
<script>
    $(function(){
    var i=0;
    $('.justified-gallery').each(function(){
        var temp='b'+i;
        $(this).attr('id',temp);
        ++i;
        console.log($(this).attr('id'));
    });
  });
</script>
<script>
     $("#b").justifiedGallery({
    rowHeight : 220,
    lastRow : 'justify',    
    // nojustify or hide for last image
    margins : 15
    
    });
</script>

{% endblock scripts %}